<?xml version="1.0"?>
<!--
/**
 * Copyright Â© OpenGento, All rights reserved.
 * See LICENSE bundled with this library for license details.
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <!-- Service Contract -->
    <preference for="Opengento\Gdpr\Api\Data\EraseCustomerInterface" type="Opengento\Gdpr\Model\EraseCustomer" />
    <preference for="Opengento\Gdpr\Api\Data\EraseCustomerSearchResultsInterface" type="Magento\Framework\Api\SearchResults" />
    <preference for="Opengento\Gdpr\Api\EraseCustomerRepositoryInterface" type="Opengento\Gdpr\Model\EraseCustomerRepository" />
    <preference for="Opengento\Gdpr\Api\EraseCustomerManagementInterface" type="Opengento\Gdpr\Model\EraseCustomerManagement" />
    <preference for="Opengento\Gdpr\Api\EraseCustomerCheckerInterface" type="Opengento\Gdpr\Model\EraseCustomerChecker" />
    <preference for="Opengento\Gdpr\Api\EraseInterface" type="Opengento\Gdpr\Model\EraseManagement"/>
    <preference for="Opengento\Gdpr\Api\EraseGuestInterface" type="Opengento\Gdpr\Model\EraseGuestManagement"/>
    <preference for="Opengento\Gdpr\Api\ExportInterface" type="Opengento\Gdpr\Model\ExportManagement"/>
    <preference for="Opengento\Gdpr\Api\ExportGuestInterface" type="Opengento\Gdpr\Model\ExportGuestManagement"/>
    <type name="Magento\Framework\Model\Entity\RepositoryFactory">
        <arguments>
            <argument name="entities" xsi:type="array">
                <item name="Opengento\Gdpr\Api\Data\EraseCustomerInterface" xsi:type="string">Opengento\Gdpr\Api\EraseCustomerRepositoryInterface</item>
            </argument>
        </arguments>
    </type>
    <!-- Anonymize Management -->
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Anonymizer\Street" type="Opengento\Gdpr\Service\Anonymize\Anonymizer\ArrayValue">
        <arguments>
            <argument name="anonymizers" xsi:type="array">
                <item name="0" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Anonymizer\Number</item>
                <item name="1" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Anonymizer\AlphaLower</item>
            </argument>
        </arguments>
    </virtualType>
    <type name="Opengento\Gdpr\Service\Anonymize\AnonymizerFactory">
        <arguments>
            <argument name="anonymizers" xsi:type="array">
                <item name="default" xsi:type="string">Opengento\Gdpr\Service\Anonymize\Anonymizer\Anonymous</item>
                <item name="anonymous" xsi:type="string">Opengento\Gdpr\Service\Anonymize\Anonymizer\Anonymous</item>
                <item name="date" xsi:type="string">Opengento\Gdpr\Service\Anonymize\Anonymizer\Date</item>
                <item name="email" xsi:type="string">Opengento\Gdpr\Service\Anonymize\Anonymizer\Email</item>
                <item name="phone" xsi:type="string">Opengento\Gdpr\Service\Anonymize\Anonymizer\Phone</item>
                <item name="number" xsi:type="string">Opengento\Gdpr\Service\Anonymize\Anonymizer\Number</item>
                <item name="alphaLower" xsi:type="string">Opengento\Gdpr\Service\Anonymize\Anonymizer\AlphaLower</item>
                <item name="alphaUpper" xsi:type="string">Opengento\Gdpr\Service\Anonymize\Anonymizer\AlphaUpper</item>
                <item name="alphaNum" xsi:type="string">Opengento\Gdpr\Service\Anonymize\Anonymizer\AlphaNum</item>
                <item name="nullValue" xsi:type="string">Opengento\Gdpr\Service\Anonymize\Anonymizer\NullValue</item>
                <item name="street" xsi:type="string">Opengento\Gdpr\Service\Anonymize\Anonymizer\Street</item>
            </argument>
        </arguments>
    </type>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Entity\DataCollectorGeneric" type="Opengento\Gdpr\Model\Entity\DataCollectorGeneric">
        <arguments>
            <argument name="dataCollectors" xsi:type="array">
                <item name="Magento\Customer\Api\Data\CustomerInterface" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\DataCollector</item>
                <item name="Magento\Customer\Api\Data\AddressInterface" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\DataCollector</item>
                <item name="Magento\Quote\Api\Data\CartInterface" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\DataCollector</item>
                <item name="Magento\Quote\Api\Data\AddressInterface" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\DataCollector</item>
                <item name="Magento\Sales\Api\Data\OrderInterface" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\DataCollector</item>
                <item name="Magento\Sales\Api\Data\OrderAddressInterface" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\DataCollector</item>
                <item name="Opengento\Gdpr\Model\Newsletter\Subscriber" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\DataCollector</item>
            </argument>
        </arguments>
    </virtualType>
    <type name="Opengento\Gdpr\Service\Anonymize\Anonymizer\Entity">
        <arguments>
            <argument name="dataCollector" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Entity\DataCollectorGeneric</argument>
        </arguments>
    </type>
    <preference for="Opengento\Gdpr\Service\Anonymize\AnonymizerInterface" type="Opengento\Gdpr\Service\Anonymize\Anonymizer\Entity"/>
    <!-- FIX for missing configuration in the Magento2 Core -->
    <type name="Magento\Framework\EntityManager\MetadataPool">
        <arguments>
            <argument name="metadata" xsi:type="array">
                <item name="Magento\Customer\Api\Data\AddressInterface" xsi:type="array">
                    <item name="entityTableName" xsi:type="string">customer_address_entity</item>
                    <item name="eavEntityType" xsi:type="string">customer_address</item>
                    <item name="identifierField" xsi:type="string">entity_id</item>
                </item>
            </argument>
        </arguments>
    </type>
    <type name="Magento\Framework\EntityManager\HydratorPool">
        <arguments>
            <argument name="hydrators" xsi:type="array">
                <item name="Magento\Quote\Api\Data\CartInterface" xsi:type="string">Magento\Framework\EntityManager\AbstractModelHydrator</item>
                <item name="Magento\Quote\Api\Data\AddressInterface" xsi:type="string">Magento\Framework\EntityManager\AbstractModelHydrator</item>
                <item name="Magento\Sales\Api\Data\OrderInterface" xsi:type="string">Magento\Framework\EntityManager\AbstractModelHydrator</item>
                <item name="Magento\Sales\Api\Data\OrderAddressInterface" xsi:type="string">Magento\Framework\EntityManager\AbstractModelHydrator</item>
                <item name="Opengento\Gdpr\Model\Newsletter\Subscriber" xsi:type="string">Magento\Framework\EntityManager\AbstractModelHydrator</item>
            </argument>
        </arguments>
    </type>
    <!-- EOF for missing configuration in the Magento2 Core -->
    <!-- Customer Anonymize Management -->
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\Config\AttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/customer_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\Config\CustomAttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/customer_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/customer_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\CustomAttributesStrategyProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\ExtensibleDataStrategyProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Customer\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Customer\Document</argument>
        </arguments>
    </virtualType>
    <!-- Customer Address Anonymize Management -->
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\Config\AttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/customer_address_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\Config\CustomAttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/customer_address_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/customer_address_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\CustomAttributesStrategyProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\ExtensibleDataStrategyProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\CustomerAddress\Document</argument>
        </arguments>
    </virtualType>
    <!-- Quote Anonymize Management -->
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\Config\AttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/quote_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\Config\CustomAttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/quote_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/quote_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\CustomAttributesStrategyProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\ExtensibleDataStrategyProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Quote\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Quote\Document</argument>
        </arguments>
    </virtualType>
    <!-- Quote Address Anonymize Management -->
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\Config\AttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/quote_address_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\Config\CustomAttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/quote_address_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/quote_address_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\CustomAttributesStrategyProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\ExtensibleDataStrategyProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\QuoteAddress\Document</argument>
        </arguments>
    </virtualType>
    <!-- Order Anonymize Management -->
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\Config\AttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/order_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\Config\CustomAttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/order_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/order_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\CustomAttributesStrategyProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\ExtensibleDataStrategyProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Order\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Order\Document</argument>
        </arguments>
    </virtualType>
    <!-- Order Address Anonymize Management -->
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\Config\AttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/order_address_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\Config\CustomAttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/order_address_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/order_address_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\CustomAttributesStrategyProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\ExtensibleDataStrategyProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\OrderAddress\Document</argument>
        </arguments>
    </virtualType>
    <!-- Subscriber Anonymize Management -->
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\Config\AttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/subscriber_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\Config\CustomAttributesConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/subscriber_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Service\Anonymize\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/anonymize/subscriber_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Anonymize\Processor\Entity\EntityValue\SmartProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\CustomAttributesStrategyProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\ExtensibleDataStrategyProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Anonymize\Processor\Subscriber\Document</argument>
        </arguments>
    </virtualType>
    <!-- Anonymize Customer Management -->
    <virtualType name="Opengento\Gdpr\Model\Customer\Anonymize\ProcessorPool" type="Magento\Framework\ObjectManager\TMap">
        <arguments>
            <argument name="type" xsi:type="string">Opengento\Gdpr\Service\Erase\ProcessorInterface</argument>
            <argument name="array" xsi:type="array">
                <item name="subscriber" xsi:type="string">Opengento\Gdpr\Model\Customer\Anonymize\Processor\SubscriberDataProcessor</item>
                <item name="quote" xsi:type="string">Opengento\Gdpr\Model\Customer\Anonymize\Processor\QuoteDataProcessor</item>
                <item name="order" xsi:type="string">Opengento\Gdpr\Model\Customer\Anonymize\Processor\OrderDataProcessor</item>
                <item name="customer_address" xsi:type="string">Opengento\Gdpr\Model\Customer\Anonymize\Processor\CustomerAddressDataProcessor</item>
                <item name="customer" xsi:type="string">Opengento\Gdpr\Model\Customer\Anonymize\Processor\CustomerDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <!-- Anonymize Guest Management -->
    <virtualType name="Opengento\Gdpr\Model\Order\Anonymize\ProcessorPool" type="Magento\Framework\ObjectManager\TMap">
        <arguments>
            <argument name="type" xsi:type="string">Opengento\Gdpr\Service\Erase\ProcessorInterface</argument>
            <argument name="array" xsi:type="array">
                <item name="subscriber" xsi:type="string">Opengento\Gdpr\Model\Order\Anonymize\Processor\SubscriberDataProcessor</item>
                <item name="quote" xsi:type="string">Opengento\Gdpr\Model\Order\Anonymize\Processor\QuoteDataProcessor</item>
                <item name="order" xsi:type="string">Opengento\Gdpr\Model\Order\Anonymize\Processor\OrderDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <!-- Delete Customer Management -->
    <virtualType name="Opengento\Gdpr\Model\Customer\Delete\ProcessorPool" type="Magento\Framework\ObjectManager\TMap">
        <arguments>
            <argument name="type" xsi:type="string">Opengento\Gdpr\Service\Erase\ProcessorInterface</argument>
            <argument name="array" xsi:type="array">
                <item name="subscriber" xsi:type="string">Opengento\Gdpr\Model\Customer\Delete\Processor\SubscriberDataProcessor</item>
                <item name="quote" xsi:type="string">Opengento\Gdpr\Model\Customer\Delete\Processor\QuoteDataProcessor</item>
                <item name="order" xsi:type="string">Opengento\Gdpr\Model\Customer\Delete\Processor\OrderDataProcessor</item>
                <item name="customer_address" xsi:type="string">Opengento\Gdpr\Model\Customer\Delete\Processor\CustomerAddressDataProcessor</item>
                <item name="customer" xsi:type="string">Opengento\Gdpr\Model\Customer\Delete\Processor\CustomerDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <!-- Delete Guest Management -->
    <virtualType name="Opengento\Gdpr\Model\Order\Delete\ProcessorPool" type="Magento\Framework\ObjectManager\TMap">
        <arguments>
            <argument name="type" xsi:type="string">Opengento\Gdpr\Service\Erase\ProcessorInterface</argument>
            <argument name="array" xsi:type="array">
                <item name="subscriber" xsi:type="string">Opengento\Gdpr\Model\Order\Delete\Processor\SubscriberDataProcessor</item>
                <item name="quote" xsi:type="string">Opengento\Gdpr\Model\Order\Delete\Processor\QuoteDataProcessor</item>
                <item name="order" xsi:type="string">Opengento\Gdpr\Model\Order\Delete\Processor\OrderDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <!-- Erase Customer Management -->
    <virtualType name="Opengento\Gdpr\Model\Customer\Erase\ProcessorResolver\AnonymizeProcessorResolver" type="Opengento\Gdpr\Service\Erase\ProcessorResolver\AnonymizeProcessorResolver">
        <arguments>
            <argument name="processorPool" xsi:type="object">Opengento\Gdpr\Model\Customer\Anonymize\ProcessorPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Customer\Erase\ProcessorResolver\DeleteProcessorResolver" type="Opengento\Gdpr\Service\Erase\ProcessorResolver\DeleteProcessorResolver">
        <arguments>
            <argument name="processorPool" xsi:type="object">Opengento\Gdpr\Model\Customer\Delete\ProcessorPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Customer\Erase\ProcessorResolverFactory" type="Opengento\Gdpr\Service\Erase\ProcessorResolverFactory">
        <arguments>
            <argument name="processorResolvers" xsi:type="array">
                <item name="anonymize" xsi:type="string">Opengento\Gdpr\Model\Customer\Erase\ProcessorResolver\AnonymizeProcessorResolver</item>
                <item name="delete" xsi:type="string">Opengento\Gdpr\Model\Customer\Erase\ProcessorResolver\DeleteProcessorResolver</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Customer\Erase\Metadata" type="Opengento\Gdpr\Service\Erase\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/erasure/customer_components_processors</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Customer\Erase\ProcessorResolver\ProcessorResolverStrategy" type="Opengento\Gdpr\Service\Erase\ProcessorResolver\ProcessorResolverStrategy">
        <arguments>
            <argument name="processorResolverFactory" xsi:type="object">Opengento\Gdpr\Model\Customer\Erase\ProcessorResolverFactory</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Model\Customer\Erase\Metadata</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Config\Source\Customer\EraseComponents" type="Opengento\Gdpr\Model\Config\Source\EraseComponents">
        <arguments>
            <argument name="processorResolverFactoryClassName" xsi:type="string">Opengento\Gdpr\Model\Customer\Erase\ProcessorResolver\ProcessorResolverStrategy</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Customer\Erase\Processor\EraseProcessor" type="Opengento\Gdpr\Service\Erase\Processor\EraseProcessor">
        <arguments>
            <argument name="eraseProcessorResolver" xsi:type="object">Opengento\Gdpr\Model\Customer\Erase\ProcessorResolver\ProcessorResolverStrategy</argument>
            <argument name="eraseComponents" xsi:type="object">Opengento\Gdpr\Model\Config\Source\Customer\EraseComponents</argument>
        </arguments>
    </virtualType>
    <type name="Opengento\Gdpr\Model\EraseManagement">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Model\Customer\Erase\Processor\EraseProcessor</argument>
        </arguments>
    </type>
    <!-- Erase Guest Management -->
    <virtualType name="Opengento\Gdpr\Model\Order\Erase\ProcessorResolver\AnonymizeProcessorResolver" type="Opengento\Gdpr\Service\Erase\ProcessorResolver\AnonymizeProcessorResolver">
        <arguments>
            <argument name="processorPool" xsi:type="object">Opengento\Gdpr\Model\Order\Anonymize\ProcessorPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Order\Erase\ProcessorResolver\DeleteProcessorResolver" type="Opengento\Gdpr\Service\Erase\ProcessorResolver\DeleteProcessorResolver">
        <arguments>
            <argument name="processorPool" xsi:type="object">Opengento\Gdpr\Model\Order\Delete\ProcessorPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Order\Erase\ProcessorResolverFactory" type="Opengento\Gdpr\Service\Erase\ProcessorResolverFactory">
        <arguments>
            <argument name="processorResolvers" xsi:type="array">
                <item name="anonymize" xsi:type="string">Opengento\Gdpr\Model\Order\Erase\ProcessorResolver\AnonymizeProcessorResolver</item>
                <item name="delete" xsi:type="string">Opengento\Gdpr\Model\Order\Erase\ProcessorResolver\DeleteProcessorResolver</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Order\Erase\Metadata" type="Opengento\Gdpr\Service\Erase\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/erasure/guest_components_processors</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Order\Erase\ProcessorResolver\ProcessorResolverStrategy" type="Opengento\Gdpr\Service\Erase\ProcessorResolver\ProcessorResolverStrategy">
        <arguments>
            <argument name="processorResolverFactory" xsi:type="object">Opengento\Gdpr\Model\Order\Erase\ProcessorResolverFactory</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Model\Order\Erase\Metadata</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Config\Source\Order\EraseComponents" type="Opengento\Gdpr\Model\Config\Source\EraseComponents">
        <arguments>
            <argument name="processorResolverFactoryClassName" xsi:type="string">Opengento\Gdpr\Model\Order\Erase\ProcessorResolver\ProcessorResolverStrategy</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Model\Order\Erase\Processor\EraseProcessor" type="Opengento\Gdpr\Service\Erase\Processor\EraseProcessor">
        <arguments>
            <argument name="eraseProcessorResolver" xsi:type="object">Opengento\Gdpr\Model\Order\Erase\ProcessorResolver\ProcessorResolverStrategy</argument>
            <argument name="eraseComponents" xsi:type="object">Opengento\Gdpr\Model\Config\Source\Order\EraseComponents</argument>
        </arguments>
    </virtualType>
    <type name="Opengento\Gdpr\Model\EraseGuestManagement">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Model\Order\Erase\Processor\EraseProcessor</argument>
        </arguments>
    </type>
    <!-- Export Customer Management -->
    <virtualType name="Opengento\Gdpr\Model\Customer\Export\Processor\CompositeProcessor" type="Opengento\Gdpr\Service\Export\Processor\CompositeProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="customer_data" xsi:type="object">Opengento\Gdpr\Model\Customer\Export\Processor\CustomerDataProcessor</item>
                <item name="customer_address_data" xsi:type="object">Opengento\Gdpr\Model\Customer\Export\Processor\CustomerAddressDataProcessor</item>
                <item name="quote" xsi:type="object">Opengento\Gdpr\Model\Customer\Export\Processor\QuoteDataProcessor</item>
                <item name="order" xsi:type="object">Opengento\Gdpr\Model\Customer\Export\Processor\OrderDataProcessor</item>
                <item name="subscriber" xsi:type="object">Opengento\Gdpr\Model\Customer\Export\Processor\SubscriberDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <type name="Opengento\Gdpr\Model\ExportManagement">
        <arguments>
            <argument name="exportProcessor" xsi:type="object">Opengento\Gdpr\Model\Customer\Export\Processor\CompositeProcessor</argument>
        </arguments>
    </type>
    <!-- Export Guest Management -->
    <virtualType name="Opengento\Gdpr\Model\Order\Export\Processor\CompositeProcessor" type="Opengento\Gdpr\Service\Export\Processor\CompositeProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="quote" xsi:type="object">Opengento\Gdpr\Service\Guest\Export\Processor\QuoteDataProcessor</item>
                <item name="order" xsi:type="object">Opengento\Gdpr\Service\Guest\Export\Processor\OrderDataProcessor</item>
                <item name="subscriber" xsi:type="object">Opengento\Gdpr\Service\Guest\Export\Processor\SubscriberDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <!-- Export Management -->
    <virtualType name="Opengento\Gdpr\Service\Export\Entity\DataCollectorGeneric" type="Opengento\Gdpr\Model\Entity\DataCollectorGeneric">
        <arguments>
            <argument name="dataCollectors" xsi:type="array">
                <item name="Magento\Customer\Api\Data\CustomerInterface" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\DataCollector</item>
                <item name="Magento\Customer\Api\Data\AddressInterface" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\DataCollector</item>
                <item name="Magento\Quote\Api\Data\CartInterface" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\DataCollector</item>
                <item name="Magento\Quote\Api\Data\AddressInterface" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\DataCollector</item>
                <item name="Magento\Sales\Api\Data\OrderInterface" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\DataCollector</item>
                <item name="Magento\Sales\Api\Data\OrderAddressInterface" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\DataCollector</item>
                <item name="Opengento\Gdpr\Model\Newsletter\Subscriber" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\DataCollector</item>
            </argument>
        </arguments>
    </virtualType>
    <type name="Opengento\Gdpr\Service\Export\Processor\AbstractDataProcessor">
        <arguments>
            <argument name="dataCollector" xsi:type="object">Opengento\Gdpr\Service\Export\Entity\DataCollectorGeneric</argument>
        </arguments>
    </type>
    <!-- Export Customer Management -->
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\Config\AttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/customer_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\Config\CustomAttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/customer_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/customer_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\CustomAttributesProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\CustomAttributesProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\CustomAttributesStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\ExtensibleDataProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\ExtensibleDataProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\ExtensibleDataStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\CustomAttributesProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Customer\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Customer\Document</argument>
        </arguments>
    </virtualType>
    <!-- Export Customer Address Management -->
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\Config\AttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/customer_address_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\Config\CustomAttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/customer_address_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/customer_address_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\CustomAttributesProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\CustomAttributesProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\CustomAttributesStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\ExtensibleDataProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\ExtensibleDataProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\ExtensibleDataStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\CustomAttributesProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\CustomerAddress\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\CustomerAddress\Document</argument>
        </arguments>
    </virtualType>
    <!-- Export Quote Management -->
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\Config\AttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/quote_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\Config\CustomAttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/quote_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/quote_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\CustomAttributesProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\CustomAttributesProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\CustomAttributesStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\ExtensibleDataProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\ExtensibleDataProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\ExtensibleDataStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\CustomAttributesProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Quote\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Quote\Document</argument>
        </arguments>
    </virtualType>
    <!-- Export Quote Address Management -->
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\Config\AttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/quote_address_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\Config\CustomAttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/quote_address_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/quote_address_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\CustomAttributesProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\CustomAttributesProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\CustomAttributesStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\ExtensibleDataProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\ExtensibleDataProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\ExtensibleDataStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\CustomAttributesProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\QuoteAddress\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\QuoteAddress\Document</argument>
        </arguments>
    </virtualType>
    <!-- Export Order Management -->
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\Config\AttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/order_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\Config\CustomAttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/order_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/order_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\CustomAttributesProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\CustomAttributesProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\CustomAttributesStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\ExtensibleDataProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\ExtensibleDataProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\ExtensibleDataStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\CustomAttributesProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Order\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Order\Document</argument>
        </arguments>
    </virtualType>
    <!-- Export Order Address Management -->
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\Config\AttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/order_address_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\Config\CustomAttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/order_address_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/order_address_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\CustomAttributesProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\CustomAttributesProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\CustomAttributesStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\ExtensibleDataProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\ExtensibleDataProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\ExtensibleDataStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\CustomAttributesProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\OrderAddress\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\OrderAddress\Document</argument>
        </arguments>
    </virtualType>
    <!-- Export Subscriber Management -->
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\Document" type="Opengento\Gdpr\Model\Entity\Document"/>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\Config\AttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/subscriber_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\Config\CustomAttributesConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/subscriber_custom_attributes</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\Config\ExtensibleDataConfig" type="Opengento\Gdpr\Model\Entity\Metadata">
        <arguments>
            <argument name="configPath" xsi:type="string">gdpr/export/subscriber_extensible_data</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\EntityValue\AttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\Config\AttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\EntityValue\CustomAttributesProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\Config\CustomAttributesConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\EntityValue\ExtensibleDataProcessor" type="Opengento\Gdpr\Service\Export\Processor\Entity\EntityValue\DataProcessor">
        <arguments>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\Document</argument>
            <argument name="metadata" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\Config\ExtensibleDataConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\CustomAttributesStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\EntityValue\CustomAttributesProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\CustomAttributesProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\CustomAttributesProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\CustomAttributesStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\ExtensibleDataStrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\EntityValue\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\ExtensibleDataProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\ExtensibleDataProcessor">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\ExtensibleDataStrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\StrategyProcessor" type="Opengento\Gdpr\Model\Entity\EntityValue\StrategyProcessor">
        <arguments>
            <argument name="processors" xsi:type="array">
                <item name="default" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\EntityValue\AttributesProcessor</item>
                <item name="custom_attributes" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\CustomAttributesProcessor</item>
                <item name="extensible_data" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\ExtensibleDataProcessor</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\EntityIterator" type="Opengento\Gdpr\Model\Entity\EntityIterator">
        <arguments>
            <argument name="processor" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\StrategyProcessor</argument>
        </arguments>
    </virtualType>
    <virtualType name="Opengento\Gdpr\Service\Export\Processor\Subscriber\DataCollector" type="Opengento\Gdpr\Model\Entity\DataCollector">
        <arguments>
            <argument name="entityIterator" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\EntityIterator</argument>
            <argument name="document" xsi:type="object">Opengento\Gdpr\Service\Export\Processor\Subscriber\Document</argument>
        </arguments>
    </virtualType>
    <!-- Export Strategy -->
    <type name="Opengento\Gdpr\Service\Export\Renderer\HtmlRenderer\LayoutInitiator">
        <arguments>
            <argument name="layoutReaderPool" xsi:type="object">pageConfigRenderPool</argument>
            <argument name="layoutGeneratorPool" xsi:type="object">pageLayoutGeneratorPool</argument>
            <argument name="defaultLayoutHandle" xsi:type="string">customer_privacy_export_personal_data</argument>
        </arguments>
    </type>
    <type name="Opengento\Gdpr\Service\Export\Renderer\HtmlRenderer">
        <arguments>
            <argument name="layoutInitiator" xsi:type="object">Opengento\Gdpr\Service\Export\Renderer\HtmlRenderer\LayoutInitiator</argument>
            <argument name="template" xsi:type="string">Magento_Theme::root.phtml</argument>
        </arguments>
    </type>
    <type name="Opengento\Gdpr\Service\Export\RendererFactory">
        <arguments>
            <argument name="renderers" xsi:type="array">
                <item name="json" xsi:type="string">Opengento\Gdpr\Service\Export\Renderer\JsonRenderer</item>
                <item name="csv" xsi:type="string">Opengento\Gdpr\Service\Export\Renderer\CsvRenderer</item>
                <item name="xml" xsi:type="string">Opengento\Gdpr\Service\Export\Renderer\XmlRenderer</item>
                <item name="html" xsi:type="string">Opengento\Gdpr\Service\Export\Renderer\HtmlRenderer</item>
                <item name="pdf" xsi:type="string">Opengento\Gdpr\Service\Export\Renderer\PdfRenderer</item>
            </argument>
        </arguments>
    </type>
    <preference for="Opengento\Gdpr\Service\Export\RendererInterface" type="Opengento\Gdpr\Service\Export\Renderer\RendererStrategy"/>
    <!-- Console Commands -->
    <type name="Magento\Framework\Console\CommandList">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="gdpr_customer_erase" xsi:type="object">Opengento\Gdpr\Console\Command\EraseCommand</item>
                <item name="gdpr_customer_export" xsi:type="object">Opengento\Gdpr\Console\Command\ExportCommand</item>
            </argument>
        </arguments>
    </type>
</config>
